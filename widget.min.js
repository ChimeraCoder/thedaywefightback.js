var _tdwfb_config=(typeof tdwfb_config!=="undefined")?tdwfb_config:{};(function(e,f){f.show_style=f.show_style||"banner";f.greeting=f.greeting||"Dear Internet";f.debug=f.debug||false;f.localAssets=f.localAssets||false;f.callOnly=f.callOnly||false;f.startAsMinimized=f.startAsMinimized||false;f.disableDate=f.disableDate||false;f.campaign=f.campaign||"thedaywefightback";f.cookieTimeout=f.cookieTimeout||172800;f.overrideLocation=f.overrideLocation||false;function a(){if(f.debug){if(this.console){console.log.apply(console,arguments)}}}var b;var h;if(f.localAssets){h="../thedaywefightback/"}else{h="//d1agz031tafz8n.cloudfront.net/thedaywefightback.js/thedaywefightback/"}function i(j,l,n){var m=new Date(new Date().getTime()+n*1000);var k=escape(l)+((n===null)?"":"; expires="+m.toUTCString());document.cookie=j+"="+k}function g(k){var l=document.cookie;var m=l.indexOf(" "+k+"=");if(m===-1){m=l.indexOf(k+"=")}if(m===-1){l=null}else{m=l.indexOf("=",m)+1;var j=l.indexOf(";",m);if(j===-1){j=l.length}l=unescape(l.substring(m,j))}return l}var c={correctDate:function(k){a("correctDate()");e.tdwfbCheckDate=function(l){a("tdwfbCheckDate()",l);k(l)};var j=document.createElement("script");j.src="//dznh7un1y2etk.cloudfront.net/time?callback=tdwfbCheckDate";document.getElementsByTagName("head")[0].appendChild(j);e.tdwfbDateCallBackFailSafe=setTimeout(function(){if(new Date().getDate()===3){k({thedaywefightback:true})}else{k({thedaywefightback:false})}},5000)},location:function(k){a("location()");e.tdwfbParseLocation=function(l){a("tdwfbParseLocation()",l);k(l)};var j=document.createElement("script");j.src="https://geoip.taskforce.is/?callback=tdwfbParseLocation";document.getElementsByTagName("head")[0].appendChild(j);e.tdwfbLocationCallBackFailSafe=setTimeout(function(){k({country:{iso_code:"US"}})},5000)}};var d={thedaywefightback:{cookieName:"thedaywefightback_hasseen",styles:{banner:{campaignContainer:"background: #000; position: fixed; width: 100%; bottom: 0; left: 0; z-index: 100000; padding: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box;",iframeContainer:"position: relative; height: 350px; width: 100%; margin: 0; background: #000; z-index: 1;",iframe:"width: 100%; height: 100%; border: 0; margin: 0; padding: 0; background: #000;",footerOverlay:"cursor: pointer; position: absolute; bottom: 0; height: 50px; width: 100%; margin: 0; background: none; z-index: 2;",closeButton:'border: 0; height: 26px; width: 26px; cursor: pointer; position: absolute; top: 20px; right: 20px; background: url("'+h+'imgs/close-button.png") no-repeat right top;',mobileCloseButton:'border: 0; height: 20px; width: 20px; cursor: pointer; position: absolute;top: 10px; right: 10px; background: url("'+h+'imgs/close-button-mobile.png") no-repeat right top;',openButton:'border: 0; height: 26px; width: 26px; cursor: pointer; position: absolute; bottom: 10px; right: 20px; background: url("'+h+'imgs/open-button.png") no-repeat right top;'}},minimized:false,show:function(l){a("show()",l);var C=g(b.cookieName);if(f.startAsMinimized&&C===null){this.minimized=true}var w=b.styles[b.config.show_style];if(w.overlay){var z=document.createElement("div");z.style.cssText=w.overlay;document.body.appendChild(z)}var m=document.createElement("div");e.tdwfbCampaignContainer=m;m.style.cssText=w.campaignContainer;var s=document.createElement("div");s.style.cssText=w.iframeContainer;var A=document.documentElement,y=document.getElementsByTagName("body")[0],r=e.innerWidth||A.clientWidth||y.clientWidth;if(r<767){if(!this.minimized){s.style.height="100px"}else{s.style.height="0px"}}else{if(this.minimized){s.style.height="50px"}else{s.style.height="350px"}}var u=document.createElement("div");u.style.cssText=w.footerOverlay;m.appendChild(u);m.appendChild(s);document.body.appendChild(m);var t=l.location&&l.location.country&&l.location.country.iso_code||"unknown";var o=true;if(C!==null){o=false}if(r<767){o=false}var p=document.createElement("iframe");p.style.cssText=w.iframe;var q=p.src=h+b.config.show_style+".html?firstTime="+o+"&callOnly="+f.callOnly+"&iso="+t+"&greeting="+f.greeting;if((t==="US"&&!f.overrideLocation)||f.overrideLocation==="usa"){p.src=q}else{if((t!=="US"&&!f.overrideLocation)||f.overrideLocation==="international"){p.src=h+b.config.show_style+"_international.html?firstTime="+o+"&iso="+t+"&greeting="+f.greeting}}s.appendChild(p);var n=this;if(r>767){var j=document.createElement("button");j.style.cssText=w.closeButton;s.appendChild(j);var k=document.createElement("button");k.style.cssText=w.openButton;s.appendChild(k);if(this.minimized){k.style.display="block";j.style.display="none";u.style.display="block"}else{k.style.display="none";j.style.display="block";u.style.display="none"}var v=function(){if(!n.minimized){s.style.height="50px";n.minimized=true;u.style.display="block";j.style.display="none";k.style.display="block";i(b.cookieName,'{"minimized": true}',f.cookieTimeout)}else{s.style.height="350px";n.minimized=false;u.style.display="none";k.style.display="none";
j.style.display="block";i(b.cookieName,'{"minimized": false}',f.cookieTimeout)}};u.onclick=v;j.onclick=v}else{var B=document.createElement("button");B.style.cssText=w.mobileCloseButton;s.appendChild(B);B.onclick=function(){i(b.cookieName,'{"minimized": true}',f.cookieTimeout);document.body.removeChild(m)}}},init:function(j){b.config=j;var k=g(b.cookieName);if(k){this.minimized=JSON.parse(k).minimized}c.correctDate(function(m){a("correctDate() callback",m);clearTimeout(e.tdwfbDateCallBackFailSafe);if(m&&(m.thedaywefightback||f.disableDate||f.debug)){c.location(function(n){a("location() callback",n);e.tdwfbLocation=n;clearTimeout(e.tdwfbLocationCallBackFailSafe);b.show({location:n,widgetConfig:f})})}});var l=this;e.onresize=function(){a("window.onresize()");if(e.tdwfbResizeCallback){clearTimeout(e.tdwfbResizeCallback)}e.tdwfbResizeCallback=setTimeout(function(){a("tdwfbResizeCallback()");if(e.tdwfbCampaignContainer){document.body.removeChild(e.tdwfbCampaignContainer);l.show({location:e.tdwfbLocation,widgetConfig:f})}},50)}}}};if(typeof d[f.campaign]!=="undefined"){b=d[f.campaign];b.init(f)}else{return false}})(window,_tdwfb_config);