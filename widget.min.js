var _tdwfb_config=typeof tdwfb_config!=="undefined"?tdwfb_config:{};(function(e,t){function n(){if(t.debug){if(this.console){console.log.apply(console,arguments)}}}function s(e,t,n){var r=new Date((new Date).getTime()+n*1e3);var i=escape(t)+(n===null?"":"; expires="+r.toUTCString());document.cookie=e+"="+i}function o(e){var t=document.cookie;var n=t.indexOf(" "+e+"=");if(n===-1){n=t.indexOf(e+"=")}if(n===-1){t=null}else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);if(r===-1){r=t.length}t=unescape(t.substring(n,r))}return t}t.show_style=t.show_style||"banner";t.greeting=t.greeting||"Dear Internet";t.debug=t.debug||false;t.localAssets=t.localAssets||false;t.callOnly=t.callOnly||false;t.startAsMinimized=t.startAsMinimized||false;t.disableDate=t.disableDate||false;t.campaign=t.campaign||"thedaywefightback";t.cookieTimeout=t.cookieTimeout||172800;t.overrideLocation=t.overrideLocation||false;var r;var i;if(t.localAssets){i="../thedaywefightback/"}else{i="//d1agz031tafz8n.cloudfront.net/thedaywefightback.js"+"/thedaywefightback/"}var u={correctDate:function(t){n("correctDate()");e.tdwfbCheckDate=function(e){n("tdwfbCheckDate()",e);t(e)};var r=document.createElement("script");r.src="//dznh7un1y2etk.cloudfront.net/time?callback=tdwfbCheckDate";document.getElementsByTagName("head")[0].appendChild(r);e.tdwfbDateCallBackFailSafe=setTimeout(function(){if((new Date).getDate()===3){t({thedaywefightback:true})}else{t({thedaywefightback:false})}},5e3)},location:function(t){n("location()");e.tdwfbParseLocation=function(e){n("tdwfbParseLocation()",e);t(e)};var r=document.createElement("script");r.src="https://geoip.taskforce.is/?callback=tdwfbParseLocation";document.getElementsByTagName("head")[0].appendChild(r);e.tdwfbLocationCallBackFailSafe=setTimeout(function(){t({country:{iso_code:"US"}})},5e3)}};var a={thedaywefightback:{cookieName:"thedaywefightback_hasseen",styles:{banner:{campaignContainer:"background: #000; position: fixed; "+"width: 100%; bottom: 0; left: 0; z-index: 100000; padding: 0; "+"-webkit-box-sizing: border-box; -moz-box-sizing: border-box;",iframeContainer:"position: relative; height: 350px; width: 100%; "+"margin: 0; background: #000; z-index: 1;",iframe:"width: 100%; height: 100%; border: 0; margin: 0; "+"padding: 0; background: #000;",footerOverlay:"cursor: pointer; position: absolute; bottom: 0; "+"height: 50px; width: 100%; margin: 0; background: none; "+"z-index: 2;",closeButton:"border: 0; height: 26px; width: 26px; "+"cursor: pointer; position: absolute; top: 20px; right: 20px; "+'background: url("'+i+'imgs/close-button.png") no-repeat right top;',mobileCloseButton:"border: 0; height: 20px; width: 20px; "+"cursor: pointer; position: absolute;top: 10px; right: 10px; "+'background: url("'+i+'imgs/close-button-mobile.png") no-repeat right top;',openButton:"border: 0; height: 26px; width: 26px; "+"cursor: pointer; position: absolute; bottom: 10px; "+'right: 20px; background: url("'+i+'imgs/open-button.png") no-repeat right top;'}},minimized:false,show:function(u){n("show()",u);var a=o(r.cookieName);if(t.startAsMinimized&&a===null){this.minimized=true}var f=r.styles[r.config.show_style];if(f.overlay){var l=document.createElement("div");l.style.cssText=f.overlay;document.body.appendChild(l)}var c=document.createElement("div");e.tdwfbCampaignContainer=c;c.style.cssText=f.campaignContainer;c.setAttribute("class","tdwfb-container");var h=document.createElement("div");h.style.cssText=f.iframeContainer;var p=document.documentElement,d=document.getElementsByTagName("body")[0],v=e.innerWidth||p.clientWidth||d.clientWidth;if(v<767){if(!this.minimized){h.style.height="100px"}else{h.style.height="0px"}}else{if(this.minimized){h.style.height="50px"}else{h.style.height="350px"}var m=document.createElement("div");m.style.cssText=f.footerOverlay;c.appendChild(m)}c.appendChild(h);document.body.appendChild(c);var g=u.location&&u.location.country&&u.location.country.iso_code||"unknown";var y=true;if(a!==null){y=false}if(v<767){y=false}var b=document.createElement("iframe");b.style.cssText=f.iframe;var w=b.src=i+r.config.show_style+".html?firstTime="+y+"&callOnly="+t.callOnly+"&iso="+g+"&greeting="+t.greeting;if(g==="US"&&!t.overrideLocation||t.overrideLocation==="usa"){b.src=w}else if(g!=="US"&&!t.overrideLocation||t.overrideLocation==="international"){b.src=i+r.config.show_style+"_international.html?firstTime="+y+"&iso="+g+"&greeting="+t.greeting}h.appendChild(b);var E=this;if(v>767){E.fullSize=true;var S=document.createElement("button");S.style.cssText=f.closeButton;h.appendChild(S);var x=document.createElement("button");x.style.cssText=f.openButton;h.appendChild(x);if(this.minimized){x.style.display="block";S.style.display="none";m.style.display="block"}else{x.style.display="none";S.style.display="block";m.style.display="none"}var T=function(){if(!E.minimized){h.style.height="50px";E.minimized=true;m.style.display="block";S.style.display="none";x.style.display="block";s(r.cookieName,'{"minimized": true}',t.cookieTimeout)}else{h.style.height="350px";E.minimized=false;m.style.display="none";x.style.display="none";S.style.display="block";s(r.cookieName,'{"minimized": false}',t.cookieTimeout)}};m.onclick=T;S.onclick=T}else{E.fullSize=false;var N=document.createElement("button");N.style.cssText=f.mobileCloseButton;h.appendChild(N);if(this.minimized){N.style.display="block"}else{N.style.display="none"}N.onclick=function(){s(r.cookieName,'{"minimized": true}',t.cookieTimeout);document.body.removeChild(c)}}},init:function(i){r.config=i;var s=o(r.cookieName);if(s){this.minimized=JSON.parse(s).minimized}u.correctDate(function(i){n("correctDate() callback",i);clearTimeout(e.tdwfbDateCallBackFailSafe);if(i&&(i.thedaywefightback||t.disableDate||t.debug)){u.location(function(i){n("location() callback",i);e.tdwfbLocation=i;clearTimeout(e.tdwfbLocationCallBackFailSafe);r.show({location:i,widgetConfig:t})})}});var a=this;if(e.addEventListener)e.addEventListener("resize",function(){var n=e,r=document,i=r.documentElement,s=r.getElementsByTagName("body")[0],o=n.innerWidth||i.clientWidth||s.clientWidth,u=n.innerHeight||i.clientHeight||s.clientHeight;if(a.fullSize&&o<767||!a.fullSize&&o>767){if(e.tdwfbResizeCallback){clearTimeout(e.tdwfbResizeCallback)}e.tdwfbResizeCallback=setTimeout(function(){document.body.removeChild(e.tdwfbCampaignContainer);a.show({location:e.tdwfbLocation,widgetConfig:t});windowWidth=o},50)}},false)}}};if(typeof a[t.campaign]!=="undefined"){r=a[t.campaign];r.init(t)}else{return false}})(window,_tdwfb_config)